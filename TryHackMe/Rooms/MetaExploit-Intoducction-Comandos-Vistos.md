# Metasploit Framework

## Versiones Principales

Metasploit tiene dos versiones principales:

- **Metasploit Pro**: La versión comercial que facilita la automatización y gestión de tareas, con una interfaz gráfica de usuario (GUI).
- **Metasploit Framework**: La versión de código abierto que se utiliza desde la línea de comandos. Es la más común en distribuciones de Linux orientadas a pruebas de penetración y es la que se abordará en esta guía.

El **Metasploit Framework** es una colección de herramientas que permiten la recolección de información, escaneo, explotación, desarrollo de exploits, post-explotación y mucho más. Aunque su uso principal se enfoca en pruebas de penetración, también es útil para investigación de vulnerabilidades y desarrollo de exploits.

---

## Conceptos Básicos

Antes de explorar los módulos, es útil entender algunos conceptos clave:

- **Vulnerabilidad**: Un fallo de diseño, código o lógica en el sistema objetivo. La explotación de una vulnerabilidad puede resultar en la divulgación de información confidencial o en la ejecución de código en el sistema objetivo.
- **Exploit**: Código que aprovecha una vulnerabilidad en el sistema objetivo.
- **Payload**: El código que se ejecutará en el sistema objetivo tras la explotación de una vulnerabilidad, como ganar acceso al sistema o leer información confidencial.

---

## Módulos en Metasploit

1. **Auxiliary**: Complementa el proceso de explotación, incluyendo escaneos y ataques de fuerza bruta.
2. **Encoders**: Codifica el payload para evitar ser detectado por software de seguridad.
3. **Evasion**: Ayuda a evadir las defensas del sistema objetivo.
4. **Exploits**: Código que aprovecha una vulnerabilidad en el sistema objetivo.
5. **NOPs**: Instrucciones "No Operation" que llenan espacio y alinean el exploit.
6. **Payloads**: Existen varios tipos de payloads:
   - **Adapters**: Envolven payloads en diferentes formatos, como comandos de PowerShell.
   - **Singles**: Payloads independientes que no necesitan descargar componentes adicionales (por ejemplo, agregar un usuario o lanzar una aplicación).
   - **Stagers**: Establecen un canal de comunicación entre Metasploit y el sistema objetivo, permitiendo enviar payloads en etapas. El tamaño del payload inicial es más pequeño, lo cual ayuda a evitar la detección.
   - **Stages**: Payloads de mayor tamaño que se descargan y ejecutan tras establecerse la conexión inicial mediante el stager.
7. **Post**: Módulos utilizados después de la explotación para realizar acciones en el sistema comprometido.

---

## Comandos Principales

- **`use`**: Selecciona un módulo.
  - Ejemplo:
    ```bash
    use exploit/windows/smb/ms17_010_eternalblue
    ```
- **`show options`**: Muestra las opciones disponibles para el módulo seleccionado.
- **`back`**: Regresa al menú anterior.
- **`info`**: Muestra información sobre el módulo actual.
- **`search`**: Busca un módulo específico.
  - La salida del comando `search` muestra una lista de módulos con información como el tipo (auxiliary, exploit, etc.) y la categoría (scanner, admin, windows, unix, etc.).
  - Puedes seleccionar cualquier módulo encontrado con el comando `use` seguido del número de la línea de resultado.
    - Ejemplo:
      ```bash
      use 0  # En lugar de usar "use auxiliary/admin/smb/ms17_010_command"
      ```

---

![Metasploit Modules](https://github.com/MC-19/Upgrade-Hub/blob/main/TryHackMe/Rooms/a88c8d37283878e01447853a68578deb.png)
